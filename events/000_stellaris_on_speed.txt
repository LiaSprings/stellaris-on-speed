namespace = StellarisOnSpeed

ship_event = {
	id = StellarisOnSpeed.10
	hide_window = yes

	trigger = {
		has_ship_flag = StellarisOnSpeed_out_of_combat
		OR = {
			is_in_combat = yes
			closest_system = {				
				any_ship_in_system = {
					owner = {
						is_hostile = root.owner
					}
				}
			}
		}
	}
	immediate = {
		remove_ship_flag = StellarisOnSpeed_out_of_combat
		remove_modifier = sos_default_speed
	}
}


ship_event = {
	id = StellarisOnSpeed.11
	hide_window = yes

	trigger = {
		is_in_combat = no
		Not = { has_ship_flag = StellarisOnSpeed_out_of_combat }
		NOT = {
			closest_system = {				
				any_ship_in_system = {
					owner = {
						is_hostile = root.owner
					}
				}
			}
		}
	}
	immediate = {
		set_ship_flag = StellarisOnSpeed_out_of_combat
		add_modifier = { modifier = sos_default_speed }
	}
}
